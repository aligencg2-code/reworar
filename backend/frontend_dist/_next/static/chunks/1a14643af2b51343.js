(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9165,e=>{"use strict";let t=e.i(47167).default.env.NEXT_PUBLIC_API_URL||"/api",s=new class{token=null;constructor(){this.token=localStorage.getItem("demet_token")}setToken(e){this.token=e,localStorage.setItem("demet_token",e)}clearToken(){this.token=null,localStorage.removeItem("demet_token")}async request(e,s={}){let a={...s.headers};s.body instanceof FormData||(a["Content-Type"]=a["Content-Type"]||"application/json"),this.token&&(a.Authorization=`Bearer ${this.token}`);let r=await fetch(`${t}${e}`,{...s,headers:a});if(401===r.status)throw this.clearToken(),window.location.href="/login",Error("Oturum sÃ¼resi doldu");if(!r.ok)throw Error((await r.json().catch(()=>({detail:"Sunucu hatasÄ±"}))).detail||"Ä°stek baÅŸarÄ±sÄ±z");return r.json()}async login(e,t){let s=await this.request("/auth/login",{method:"POST",body:JSON.stringify({username:e,password:t})});return this.setToken(s.access_token),s}async register(e,t,s){let a=await this.request("/auth/register",{method:"POST",body:JSON.stringify({username:e,email:t,password:s})});return this.setToken(a.access_token),a}getInstagramConnectUrl(){return`${t}/auth/instagram/connect`}async getDashboardStats(){return this.request("/dashboard/stats")}async getRecentActivity(e=20){return this.request(`/dashboard/activity?limit=${e}`)}async getAccounts(){return this.request("/accounts")}async getAccount(e){return this.request(`/accounts/${e}`)}async updateAccount(e,t){return this.request(`/accounts/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteAccount(e){return this.request(`/accounts/${e}`,{method:"DELETE"})}async getPosts(e){let t=e?"?"+new URLSearchParams(e).toString():"";return this.request(`/posts${t}`)}async getCalendar(e,t,s){let a=new URLSearchParams({month:String(e),year:String(t)});return s&&a.set("account_id",String(s)),this.request(`/posts/calendar?${a}`)}async createPost(e){return this.request("/posts",{method:"POST",body:JSON.stringify(e)})}async updatePost(e,t){return this.request(`/posts/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deletePost(e){return this.request(`/posts/${e}`,{method:"DELETE"})}async publishPost(e){return this.request(`/posts/${e}/publish`,{method:"POST"})}async getMedia(e){let t=e?"?"+new URLSearchParams(e).toString():"";return this.request(`/media${t}`)}async uploadMedia(e,s="photo",a="default",r){let i=new FormData;e.forEach(e=>i.append("files",e)),i.append("media_type",s),i.append("folder",a),r&&i.append("account_id",String(r));let n={};this.token&&(n.Authorization=`Bearer ${this.token}`);let o=await fetch(`${t}/media/upload`,{method:"POST",headers:n,body:i});if(!o.ok)throw Error("YÃ¼kleme baÅŸarÄ±sÄ±z");return o.json()}async resizeMedia(e,t){return this.request(`/media/${e}/resize?aspect_ratio=${t}`,{method:"POST"})}async deleteMedia(e){return this.request(`/media/${e}`,{method:"DELETE"})}async getConversations(e){return this.request(`/messages/conversations/${e}`)}async getMessageHistory(e,t,s=50){let a=new URLSearchParams({limit:String(s)});return t&&a.set("conversation_id",t),this.request(`/messages/history/${e}?${a}`)}async getTemplates(){return this.request("/messages/templates")}async createTemplate(e){return this.request("/messages/templates",{method:"POST",body:JSON.stringify(e)})}async deleteTemplate(e){return this.request(`/messages/templates/${e}`,{method:"DELETE"})}async getAutoReplyRules(){return this.request("/messages/auto-reply")}async createAutoReplyRule(e){return this.request("/messages/auto-reply",{method:"POST",body:JSON.stringify(e)})}async deleteAutoReplyRule(e){return this.request(`/messages/auto-reply/${e}`,{method:"DELETE"})}async startDownload(e){return this.request("/downloads/start",{method:"POST",body:JSON.stringify(e)})}async getDownloadStatus(e){return this.request(`/downloads/status/${e}`)}async stopDownload(e){return this.request(`/downloads/stop/${e}`,{method:"POST"})}async getHashtagGroups(e){let t=e?`?account_id=${e}`:"";return this.request(`/hashtags${t}`)}async createHashtagGroup(e){return this.request("/hashtags",{method:"POST",body:JSON.stringify(e)})}async updateHashtagGroup(e,t){return this.request(`/hashtags/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteHashtagGroup(e){return this.request(`/hashtags/${e}`,{method:"DELETE"})}async getSettings(){return this.request("/settings")}async updateSettings(e){return this.request("/settings",{method:"POST",body:JSON.stringify({settings:e})})}async getBackups(){return this.request("/dashboard/backups")}async createBackup(){return this.request("/dashboard/backups/create",{method:"POST"})}};e.s(["api",0,s])},47282,e=>{"use strict";var t=e.i(47167),s=e.i(43476),a=e.i(71645),r=e.i(9165);function i(){let[e,i]=(0,a.useState)([]),[n,o]=(0,a.useState)({}),[d,l]=(0,a.useState)(0),[c,u]=(0,a.useState)(!0),[h,m]=(0,a.useState)({media_type:"",folder:""}),[y,p]=(0,a.useState)(!1),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{b()},[h]);let b=async()=>{try{let e={};h.media_type&&(e.media_type=h.media_type),h.folder&&(e.folder=h.folder);let t=await r.api.getMedia(e);i(t.items||[]),o(t.counts||{}),l(t.total||0)}catch(e){console.error(e)}finally{u(!1)}},f=async e=>{let t=e.target.files;if(t&&0!==t.length){p(!0);try{await r.api.uploadMedia(Array.from(t),h.media_type||"photo"),b()}catch(e){alert(e.message)}finally{p(!1)}}},S=async(e,t)=>{try{await r.api.resizeMedia(e,t),b()}catch(e){alert(e.message)}},k=async e=>{if(confirm("Bu medyayÄ± silmek istediÄŸinize emin misiniz?"))try{await r.api.deleteMedia(e),b()}catch(e){alert(e.message)}};return c?(0,s.jsx)("div",{className:"flex-center",style:{height:"60vh"},children:(0,s.jsx)("div",{className:"spinner"})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"page-header__title",children:"Medya KÃ¼tÃ¼phanesi"}),(0,s.jsxs)("p",{className:"page-header__subtitle",children:[d," dosya"]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,s.jsx)("input",{ref:g,type:"file",multiple:!0,accept:"image/*,video/*",style:{display:"none"},onChange:f}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>g.current?.click(),disabled:y,children:y?"â³ YÃ¼kleniyor...":"ðŸ“¤ Dosya YÃ¼kle"})]})]}),(0,s.jsxs)("div",{className:"tabs",children:[(0,s.jsxs)("div",{className:`tab ${""===h.media_type?"active":""}`,onClick:()=>m({...h,media_type:""}),children:["TÃ¼mÃ¼ ",(0,s.jsx)("span",{className:"tab-count",children:d})]}),Object.entries(n).map(([e,t])=>(0,s.jsxs)("div",{className:`tab ${h.media_type===e?"active":""}`,onClick:()=>m({...h,media_type:e}),children:["photo"===e?"ðŸ“· FotoÄŸraf":"video"===e?"ðŸŽ¬ Video":"reels"===e?"ðŸŽ­ Reels":"ðŸ‘¤ Profil",(0,s.jsx)("span",{className:"tab-count",children:t})]},e))]}),0===e.length?(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("div",{className:"empty-state__icon",children:"ðŸ–¼ï¸"}),(0,s.jsx)("div",{className:"empty-state__title",children:"Medya dosyasÄ± bulunamadÄ±"}),(0,s.jsx)("p",{children:"Dosya yÃ¼klemek iÃ§in yukarÄ±daki butonu kullanÄ±n"})]}):(0,s.jsx)("div",{className:"media-grid",children:e.map(e=>{var a;return(0,s.jsxs)("div",{className:"media-item",children:[e.thumbnail_url?(0,s.jsx)("img",{src:`${t.default.env.NEXT_PUBLIC_API_URL||"http://127.0.0.1:8000/api"}${e.thumbnail_url}`,alt:e.filename}):(0,s.jsx)("div",{className:"flex-center",style:{height:"100%",background:"var(--bg-surface)"},children:"video"===e.media_type?"ðŸŽ¬":"ðŸ“·"}),(0,s.jsx)("div",{className:"media-item__overlay",children:(0,s.jsxs)("div",{style:{width:"100%"},children:[(0,s.jsx)("div",{style:{fontSize:"0.75rem",fontWeight:600,color:"white",marginBottom:4},children:e.original_filename}),(0,s.jsxs)("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.7)"},children:[e.width&&e.height?`${e.width}\xd7${e.height} â€¢ `:"",(a=e.file_size||0)<1024?`${a} B`:a<1048576?`${(a/1024).toFixed(1)} KB`:`${(a/1048576).toFixed(1)} MB`]}),(0,s.jsxs)("div",{style:{display:"flex",gap:4,marginTop:6},children:["photo"===e.media_type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:t=>{t.stopPropagation(),S(e.id,"1:1")},children:"1:1"}),(0,s.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:t=>{t.stopPropagation(),S(e.id,"4:5")},children:"4:5"}),(0,s.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:t=>{t.stopPropagation(),S(e.id,"9:16")},children:"9:16"})]}),(0,s.jsx)("button",{className:"btn btn-sm btn-danger",onClick:t=>{t.stopPropagation(),k(e.id)},children:"ðŸ—‘ï¸"})]})]})})]},e.id)})})]})}e.s(["default",()=>i])}]);