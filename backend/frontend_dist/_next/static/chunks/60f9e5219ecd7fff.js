(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9165,e=>{"use strict";let t=e.i(47167).default.env.NEXT_PUBLIC_API_URL||"/api",s=new class{token=null;constructor(){this.token=localStorage.getItem("demet_token")}setToken(e){this.token=e,localStorage.setItem("demet_token",e)}clearToken(){this.token=null,localStorage.removeItem("demet_token")}async request(e,s={}){let a={...s.headers};s.body instanceof FormData||(a["Content-Type"]=a["Content-Type"]||"application/json"),this.token&&(a.Authorization=`Bearer ${this.token}`);let r=await fetch(`${t}${e}`,{...s,headers:a});if(401===r.status)throw this.clearToken(),window.location.href="/login",Error("Oturum sÃ¼resi doldu");if(!r.ok)throw Error((await r.json().catch(()=>({detail:"Sunucu hatasÄ±"}))).detail||"Ä°stek baÅŸarÄ±sÄ±z");return r.json()}async login(e,t){let s=await this.request("/auth/login",{method:"POST",body:JSON.stringify({username:e,password:t})});return this.setToken(s.access_token),s}async register(e,t,s){let a=await this.request("/auth/register",{method:"POST",body:JSON.stringify({username:e,email:t,password:s})});return this.setToken(a.access_token),a}getInstagramConnectUrl(){return`${t}/auth/instagram/connect`}async getDashboardStats(){return this.request("/dashboard/stats")}async getRecentActivity(e=20){return this.request(`/dashboard/activity?limit=${e}`)}async getAccounts(){return this.request("/accounts")}async getAccount(e){return this.request(`/accounts/${e}`)}async updateAccount(e,t){return this.request(`/accounts/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteAccount(e){return this.request(`/accounts/${e}`,{method:"DELETE"})}async getPosts(e){let t=e?"?"+new URLSearchParams(e).toString():"";return this.request(`/posts${t}`)}async getCalendar(e,t,s){let a=new URLSearchParams({month:String(e),year:String(t)});return s&&a.set("account_id",String(s)),this.request(`/posts/calendar?${a}`)}async createPost(e){return this.request("/posts",{method:"POST",body:JSON.stringify(e)})}async updatePost(e,t){return this.request(`/posts/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deletePost(e){return this.request(`/posts/${e}`,{method:"DELETE"})}async publishPost(e){return this.request(`/posts/${e}/publish`,{method:"POST"})}async getMedia(e){let t=e?"?"+new URLSearchParams(e).toString():"";return this.request(`/media${t}`)}async uploadMedia(e,s="photo",a="default",r){let i=new FormData;e.forEach(e=>i.append("files",e)),i.append("media_type",s),i.append("folder",a),r&&i.append("account_id",String(r));let n={};this.token&&(n.Authorization=`Bearer ${this.token}`);let l=await fetch(`${t}/media/upload`,{method:"POST",headers:n,body:i});if(!l.ok)throw Error("YÃ¼kleme baÅŸarÄ±sÄ±z");return l.json()}async resizeMedia(e,t){return this.request(`/media/${e}/resize?aspect_ratio=${t}`,{method:"POST"})}async deleteMedia(e){return this.request(`/media/${e}`,{method:"DELETE"})}async getConversations(e){return this.request(`/messages/conversations/${e}`)}async getMessageHistory(e,t,s=50){let a=new URLSearchParams({limit:String(s)});return t&&a.set("conversation_id",t),this.request(`/messages/history/${e}?${a}`)}async getTemplates(){return this.request("/messages/templates")}async createTemplate(e){return this.request("/messages/templates",{method:"POST",body:JSON.stringify(e)})}async deleteTemplate(e){return this.request(`/messages/templates/${e}`,{method:"DELETE"})}async getAutoReplyRules(){return this.request("/messages/auto-reply")}async createAutoReplyRule(e){return this.request("/messages/auto-reply",{method:"POST",body:JSON.stringify(e)})}async deleteAutoReplyRule(e){return this.request(`/messages/auto-reply/${e}`,{method:"DELETE"})}async startDownload(e){return this.request("/downloads/start",{method:"POST",body:JSON.stringify(e)})}async getDownloadStatus(e){return this.request(`/downloads/status/${e}`)}async stopDownload(e){return this.request(`/downloads/stop/${e}`,{method:"POST"})}async getHashtagGroups(e){let t=e?`?account_id=${e}`:"";return this.request(`/hashtags${t}`)}async createHashtagGroup(e){return this.request("/hashtags",{method:"POST",body:JSON.stringify(e)})}async updateHashtagGroup(e,t){return this.request(`/hashtags/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteHashtagGroup(e){return this.request(`/hashtags/${e}`,{method:"DELETE"})}async getSettings(){return this.request("/settings")}async updateSettings(e){return this.request("/settings",{method:"POST",body:JSON.stringify({settings:e})})}async getBackups(){return this.request("/dashboard/backups")}async createBackup(){return this.request("/dashboard/backups/create",{method:"POST"})}};e.s(["api",0,s])},25244,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(9165);function r(){let[e,r]=(0,s.useState)([]),[i,n]=(0,s.useState)([]),[l,o]=(0,s.useState)(0),[d,c]=(0,s.useState)(!0),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)({status:"",account_id:""}),[y,g]=(0,s.useState)({account_id:0,caption:"",media_type:"photo",scheduled_at:"",status:"draft",hashtag_group_id:null}),[x,f]=(0,s.useState)([]),[b,v]=(0,s.useState)([]),[j,S]=(0,s.useState)(!1),[k,_]=(0,s.useState)(""),[N,T]=(0,s.useState)(!1),w=(0,s.useRef)(null),[P,C]=(0,s.useState)(null);(0,s.useEffect)(()=>{q()},[m]);let q=async()=>{try{let e={};m.status&&(e.status=m.status),m.account_id&&(e.account_id=m.account_id);let[t,s]=await Promise.all([a.api.getPosts(e),a.api.getAccounts()]);r(t.posts||[]),o(t.total||0),n(s||[]),!y.account_id&&s.length>0&&g(e=>({...e,account_id:s[0].id}))}catch(e){console.error(e)}finally{c(!1)}},$=e=>{if(!e)return;let t=Array.from(e);f(e=>[...e,...t]),t.forEach(e=>{if(e.type.startsWith("image/")){let t=new FileReader;t.onload=e=>{v(t=>[...t,e.target?.result])},t.readAsDataURL(e)}else e.type.startsWith("video/")?v(e=>[...e,"ðŸŽ¬"]):v(e=>[...e,"ðŸ“"])}),t.some(e=>e.type.startsWith("video/"))&&g(e=>({...e,media_type:"video"})),t.length>1&&g(e=>({...e,media_type:"carousel"}))},O=(0,s.useCallback)(e=>{e.preventDefault(),T(!0)},[]),D=(0,s.useCallback)(e=>{e.preventDefault(),T(!1)},[]),z=(0,s.useCallback)(e=>{e.preventDefault(),T(!1),$(e.dataTransfer.files)},[]),E=async()=>{if(0===x.length)return void alert("LÃ¼tfen en az bir medya dosyasÄ± ekleyin!");S(!0),_("Dosyalar yÃ¼kleniyor...");try{let e=await a.api.uploadMedia(x,y.media_type,"posts",y.account_id||void 0);_("GÃ¶nderi oluÅŸturuluyor...");let t={...y,media_ids:e.media_ids||[]};t.scheduled_at||delete t.scheduled_at,await a.api.createPost(t),h(!1),f([]),v([]),g({account_id:i[0]?.id||0,caption:"",media_type:"photo",scheduled_at:"",status:"draft",hashtag_group_id:null}),_(""),q()}catch(e){alert(e.message||"GÃ¶nderi oluÅŸturulamadÄ±")}finally{S(!1),_("")}},R=async e=>{if(confirm("Bu gÃ¶nderiyi ÅŸimdi yayÄ±nlamak istediÄŸinize emin misiniz?"))try{await a.api.publishPost(e),q()}catch(e){alert(e.message)}},A=async e=>{if(confirm("Bu gÃ¶nderiyi silmek istediÄŸinize emin misiniz?"))try{await a.api.deletePost(e),q()}catch(e){alert(e.message)}},L=async()=>{if(P)try{await a.api.updatePost(P.id,{caption:P.caption,scheduled_at:P.scheduled_at||null,status:P.status}),C(null),q()}catch(e){alert(e.message)}},U={draft:"badge-info",scheduled:"badge-warning",publishing:"badge-primary",published:"badge-success",failed:"badge-error"},H={draft:"Taslak",scheduled:"PlanlandÄ±",publishing:"YayÄ±nlanÄ±yor",published:"YayÄ±nlandÄ±",failed:"HatalÄ±"},B={photo:"ðŸ“·",video:"ðŸŽ¬",story:"ðŸ“±",reels:"ðŸŽ­",carousel:"ðŸŽ "};return d?(0,t.jsx)("div",{className:"flex-center",style:{height:"60vh"},children:(0,t.jsx)("div",{className:"spinner"})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"page-header",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"page-header__title",children:"GÃ¶nderi YÃ¶netimi"}),(0,t.jsxs)("p",{className:"page-header__subtitle",children:[l," gÃ¶nderi"]})]}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:()=>h(!0),children:"âž• Yeni GÃ¶nderi"})]}),(0,t.jsxs)("div",{className:"row",style:{marginBottom:20,gap:12},children:[(0,t.jsxs)("select",{className:"form-select",style:{width:160},value:m.status,onChange:e=>p({...m,status:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"TÃ¼m Durumlar"}),(0,t.jsx)("option",{value:"draft",children:"Taslak"}),(0,t.jsx)("option",{value:"scheduled",children:"PlanlandÄ±"}),(0,t.jsx)("option",{value:"published",children:"YayÄ±nlandÄ±"}),(0,t.jsx)("option",{value:"failed",children:"HatalÄ±"})]}),(0,t.jsxs)("select",{className:"form-select",style:{width:200},value:m.account_id,onChange:e=>p({...m,account_id:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"TÃ¼m Hesaplar"}),i.map(e=>(0,t.jsxs)("option",{value:e.id,children:["@",e.username]},e.id))]})]}),0===e.length?(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)("div",{className:"empty-state__icon",children:"ðŸ“"}),(0,t.jsx)("div",{className:"empty-state__title",children:"HenÃ¼z gÃ¶nderi yok"}),(0,t.jsx)("p",{children:"Yeni gÃ¶nderi oluÅŸturmak iÃ§in butonu kullanÄ±n"})]}):(0,t.jsx)("div",{className:"table-container",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Hesap"}),(0,t.jsx)("th",{children:"TÃ¼r"}),(0,t.jsx)("th",{children:"AÃ§Ä±klama"}),(0,t.jsx)("th",{children:"Durum"}),(0,t.jsx)("th",{children:"Tarih"}),(0,t.jsx)("th",{children:"Medya"}),(0,t.jsx)("th",{children:"Ä°ÅŸlemler"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>{var s;let a;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:(s=e.account_id,(a=i.find(e=>e.id===s))?`@${a.username}`:`#${s}`)}),(0,t.jsxs)("td",{children:[B[e.media_type]||"ðŸ“·"," ",e.media_type]}),(0,t.jsx)("td",{style:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.caption||(0,t.jsx)("span",{style:{color:"var(--text-muted)"},children:"AÃ§Ä±klama yok"})}),(0,t.jsxs)("td",{children:[(0,t.jsx)("span",{className:`badge ${U[e.status]||"badge-info"}`,children:H[e.status]||e.status}),e.error_message&&(0,t.jsx)("div",{style:{fontSize:"0.7rem",color:"var(--color-error)",marginTop:4},children:e.error_message.substring(0,80)})]}),(0,t.jsx)("td",{style:{fontSize:"0.78rem",color:"var(--text-secondary)"},children:e.scheduled_at?new Date(e.scheduled_at).toLocaleString("tr-TR"):"â€”"}),(0,t.jsxs)("td",{children:[e.media_count," dosya"]}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{style:{display:"flex",gap:6},children:["published"!==e.status&&(0,t.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>R(e.id),title:"Åžimdi YayÄ±nla",children:"ðŸš€"}),"published"!==e.status&&(0,t.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:()=>C({...e,scheduled_at:e.scheduled_at?e.scheduled_at.slice(0,16):""}),title:"DÃ¼zenle",children:"âœï¸"}),(0,t.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>A(e.id),title:"Sil",children:"ðŸ—‘ï¸"})]})})]},e.id)})})]})}),u&&(0,t.jsx)("div",{className:"modal-overlay",onClick:()=>{j||h(!1)},children:(0,t.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),style:{maxWidth:600},children:[(0,t.jsx)("h3",{className:"modal-title",children:"ðŸ“ Yeni GÃ¶nderi OluÅŸtur"}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Hesap"}),(0,t.jsx)("select",{className:"form-select",value:y.account_id,onChange:e=>g({...y,account_id:Number(e.target.value)}),children:i.map(e=>(0,t.jsxs)("option",{value:e.id,children:["@",e.username]},e.id))})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Medya TÃ¼rÃ¼"}),(0,t.jsxs)("select",{className:"form-select",value:y.media_type,onChange:e=>g({...y,media_type:e.target.value}),children:[(0,t.jsx)("option",{value:"photo",children:"ðŸ“· FotoÄŸraf"}),(0,t.jsx)("option",{value:"video",children:"ðŸŽ¬ Video"}),(0,t.jsx)("option",{value:"story",children:"ðŸ“± Story"}),(0,t.jsx)("option",{value:"reels",children:"ðŸŽ­ Reels"}),(0,t.jsx)("option",{value:"carousel",children:"ðŸŽ  Carousel"})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Medya DosyalarÄ±"}),(0,t.jsxs)("div",{onDragOver:O,onDragLeave:D,onDrop:z,onClick:()=>w.current?.click(),style:{border:`2px dashed ${N?"var(--color-primary)":"var(--border-color)"}`,borderRadius:12,padding:x.length>0?12:40,textAlign:"center",cursor:"pointer",transition:"all 0.2s",background:N?"rgba(233, 30, 99, 0.05)":"transparent",minHeight:100},children:[(0,t.jsx)("input",{ref:w,type:"file",multiple:!0,accept:"image/*,video/*",style:{display:"none"},onChange:e=>$(e.target.files)}),0===x.length?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:36,marginBottom:8},children:"ðŸ“"}),(0,t.jsx)("div",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"DosyalarÄ± sÃ¼rÃ¼kleyip bÄ±rakÄ±n"}),(0,t.jsx)("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem",marginTop:4},children:"veya tÄ±klayarak seÃ§in"})]}):(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:8},children:x.map((e,s)=>(0,t.jsxs)("div",{style:{position:"relative",borderRadius:8,overflow:"hidden",background:"var(--surface-color)",aspectRatio:"1"},children:[b[s]&&"ðŸŽ¬"!==b[s]&&"ðŸ“"!==b[s]?(0,t.jsx)("img",{src:b[s],alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",fontSize:28},children:b[s]||"ðŸ“"}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),f(e=>e.filter((e,t)=>t!==s)),v(e=>e.filter((e,t)=>t!==s))},style:{position:"absolute",top:2,right:2,background:"rgba(0,0,0,0.7)",color:"#fff",border:"none",borderRadius:"50%",width:20,height:20,fontSize:10,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"âœ•"}),(0,t.jsx)("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",color:"#fff",fontSize:"0.6rem",padding:"2px 4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name})]},s))})]}),(0,t.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:4},children:x.length>0&&`${x.length} dosya se\xe7ildi`})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"AÃ§Ä±klama"}),(0,t.jsx)("textarea",{className:"form-input",rows:4,placeholder:"GÃ¶nderi aÃ§Ä±klamasÄ±nÄ± yazÄ±n... #hashtag @mention",value:y.caption,onChange:e=>g({...y,caption:e.target.value})}),(0,t.jsxs)("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",textAlign:"right"},children:[(y.caption||"").length,"/2200"]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Planlanan Tarih (Opsiyonel)"}),(0,t.jsx)("input",{type:"datetime-local",className:"form-input",value:y.scheduled_at,onChange:e=>g({...y,scheduled_at:e.target.value,status:e.target.value?"scheduled":"draft"})})]}),k&&(0,t.jsxs)("div",{style:{padding:"8px 12px",borderRadius:8,background:"rgba(233, 30, 99, 0.1)",color:"var(--color-primary)",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)("div",{className:"spinner",style:{width:16,height:16}}),k]}),(0,t.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:20},children:[(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>{h(!1),f([]),v([])},disabled:j,children:"Ä°ptal"}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:E,disabled:j||0===x.length,children:j?"â³ YÃ¼kleniyor...":"scheduled"===y.status?"ðŸ“… Planla":"ðŸ’¾ Taslak Kaydet"})]})]})}),P&&(0,t.jsx)("div",{className:"modal-overlay",onClick:()=>C(null),children:(0,t.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),style:{maxWidth:500},children:[(0,t.jsx)("h3",{className:"modal-title",children:"âœï¸ GÃ¶nderiyi DÃ¼zenle"}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"AÃ§Ä±klama"}),(0,t.jsx)("textarea",{className:"form-input",rows:4,value:P.caption||"",onChange:e=>C({...P,caption:e.target.value})})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Planlanan Tarih"}),(0,t.jsx)("input",{type:"datetime-local",className:"form-input",value:P.scheduled_at||"",onChange:e=>C({...P,scheduled_at:e.target.value,status:e.target.value?"scheduled":"draft"})})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Durum"}),(0,t.jsxs)("select",{className:"form-select",value:P.status,onChange:e=>C({...P,status:e.target.value}),children:[(0,t.jsx)("option",{value:"draft",children:"Taslak"}),(0,t.jsx)("option",{value:"scheduled",children:"PlanlandÄ±"})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:20},children:[(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>C(null),children:"Ä°ptal"}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:L,children:"ðŸ’¾ Kaydet"})]})]})})]})}e.s(["default",()=>r])}]);